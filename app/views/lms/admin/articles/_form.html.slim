- url = article.new_record? ? lms.admin_articles_path : lms.admin_article_path(article)

= simple_form_for article, url: url do |form|
  - if article.errors.any?
    div style="color: red"
      h2 = "#{pluralize(article.errors.count, "error")} prohibited this article from being saved:"

      ul
        article.errors.each do |error|
          li = error.full_message

  .mt-6
    .grid.grid-cols-1.gap-6.md:grid-cols-2  
      .card.bg-base-100.shadow
        .card-body
          .card-title Basic Information
          = form.simple_fields_for :content do |content_fields|
            = content_fields.input :title
            = content_fields.input :subtitle
            = content_fields.input :description, as: :rich_textarea
          
      .card.bg-base-100.shadow 
        .card-body 
          .card-title Cover Image
          - if article.cover.attached?
            .mt-5 
              = image_tag article.cover.url
          .mt-5
            = form.simple_fields_for :content do |content_fields|
              div data-controller="lms--filepond"
                = content_fields.file_field :cover, class: "filepond", direct_upload: true, accept: 'image/*', data: { "lms--filepond-target": "input"}
  
  .mt-6.flex.justify-end.gap-3      
    // Capture and render the block passed from the calling template
    - if block_given?
      = yield(form)
    - else
      = form.submit "Save", class: "btn btn-primary btn-wide mt-4 max-w-full gap-3 md:mt-6"
